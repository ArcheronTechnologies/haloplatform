# Halo Platform Configuration
# Copy this file to .env and fill in the values

# ==============================
# ENVIRONMENT
# ==============================
# Options: development, staging, production
ENVIRONMENT=development

# ==============================
# DATABASE
# ==============================
# PostgreSQL connection URL
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://halo:CHANGE_ME@localhost:5432/halo

# ==============================
# REDIS
# ==============================
# Redis connection URL for caching and rate limiting
REDIS_URL=redis://localhost:6379

# ==============================
# ELASTICSEARCH
# ==============================
# Elasticsearch URL for search functionality
ELASTICSEARCH_URL=http://localhost:9200

# ==============================
# SECURITY - REQUIRED IN PRODUCTION
# ==============================

# Secret key for JWT signing and session encryption
# MUST be at least 32 characters
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=

# PII encryption key for personnummer, account numbers, etc.
# Must be a valid Fernet key (base64 encoded)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
PII_ENCRYPTION_KEY=

# ==============================
# JWT SETTINGS
# ==============================
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==============================
# CORS SETTINGS
# ==============================
# Comma-separated list of allowed origins
CORS_ORIGINS=["http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=true

# ==============================
# RATE LIMITING
# ==============================
# Maximum requests per window
RATE_LIMIT_REQUESTS=100
# Window size in seconds
RATE_LIMIT_WINDOW_SECONDS=60

# ==============================
# SESSION SECURITY
# ==============================
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# ==============================
# LOGGING
# ==============================
LOG_LEVEL=INFO
DEBUG=false

# ==============================
# SWEDISH GOVERNMENT API CREDENTIALS
# ==============================

# SCB Företagsregistret API
# Certificate file (PFX format)
SCB_CERT_PATH=
SCB_CERT_PASSWORD=

# Bolagsverket Företagsinformation API (v4)
# OAuth2 access token
BOLAGSVERKET_ACCESS_TOKEN=

# Lantmäteriet Open Data API
LANTMATERIET_API_KEY=

# ==============================
# NLP MODEL PATHS
# ==============================
KB_BERT_MODEL_PATH=./models/kb-bert-ner
GPT_SW3_MODEL_PATH=./models/gpt-sw3

# ==============================
# HUMAN-IN-LOOP COMPLIANCE THRESHOLDS
# ==============================
# Confidence threshold for Tier 3 (approval required) alerts
TIER_3_THRESHOLD=0.85
# Confidence threshold for Tier 2 (acknowledgment required) alerts
TIER_2_THRESHOLD=0.50
# Minimum review time in seconds before flagging as rubber-stamp
MIN_REVIEW_SECONDS=2.0
